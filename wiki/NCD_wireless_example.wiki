#summary NCD - wireless networking

= Introduction =

NCD, the Network Configuration Daemon, is a daemon and programming language for configuration of network interfaces and other aspects of the operating system.

This page documents using NCD for wireless LAN. For a guide to NCD and its basic feaures, see [NCD].

= Basic example =

Create a `wpa_supplicant` configuration file, `/etc/wpa_supplicant/all.conf` for example:

{{{
network={
        ssid="Some Network"
        scan_ssid=1
        key_mgmt=WPA-PSK
        psk="password"
}

network={
        ssid="Other Network"
        scan_ssid=1
        key_mgmt=WPA-PSK
        psk="password"
}
}}}

And use this NCD program:

{{{
process wlan {
    # Set device.
    var("wlan0") dev;

    # Wait for device and rfkill.
    net.backend.waitdevice(dev);
    net.backend.rfkill("wlan", dev);

    # Connect to wireless network.
    list() args;
    net.backend.wpa_supplicant(dev, "/etc/wpa_supplicant/all.conf", "/usr/sbin/wpa_supplicant", args);

    # DHCP configuration.
    net.ipv4.dhcp(dev) dhcp;
    ip_in_network(dhcp.addr, "127.0.0.0", "8") test_local;
    ifnot(test_local);
    var(dhcp.addr) addr;
    var(dhcp.prefix) addr_prefix;
    var(dhcp.gateway) gateway;
    var(dhcp.dns_servers) dns_servers;

    # Assign IP address to interface.
    net.ipv4.addr(dev, addr, addr_prefix);

    # Add default route.
    net.ipv4.route("0.0.0.0", "0", gateway, "20", dev);

    # Add DNS servers.
    net.dns(dns_servers, "20");
}
}}}